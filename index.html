<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LyraX - NextGen Player</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://sdk.scdn.co/spotify-player.js"></script>
    <style>
        body { background: #080808; color: #fff; font-family: 'Segoe UI', sans-serif; overflow: hidden; height: 100vh; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.08); }
        .neon-glow { box-shadow: 0 0 30px rgba(29, 185, 84, 0.3); }
        .pnr-border { border-left: 4px solid #1DB954; }
        @keyframes flow { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        .bg-animate { background: linear-gradient(-45deg, #000000, #0a1f0e, #000000); background-size: 400% 400%; animation: flow 10s infinite; }
    </style>
</head>
<body class="bg-animate flex items-center justify-center p-4">

    <div id="player-card" class="glass w-full max-w-sm rounded-[2.5rem] p-8 transition-all duration-700 opacity-0 translate-y-10">
        <div class="flex justify-between items-start mb-10">
            <div>
                <h1 class="text-3xl font-black tracking-tighter italic">LYRA<span class="text-green-500">X</span></h1>
                <p class="text-[10px] text-zinc-500 tracking-[0.3em] uppercase mt-1">Status: Operational</p>
            </div>
            <div id="pnr-tag" class="bg-green-500/10 text-green-500 text-[10px] px-3 py-1 rounded-full font-bold border border-green-500/20">SESSION v2.0</div>
        </div>

        <div class="relative group mb-8">
            <img id="track-art" src="https://via.placeholder.com/400/101010/1DB954?text=LyraX" class="w-full aspect-square rounded-3xl object-cover neon-glow transition-transform duration-500 group-hover:scale-105">
        </div>

        <div class="pnr-border pl-4 mb-10">
            <h2 id="track-name" class="text-xl font-bold truncate">System Standby</h2>
            <p id="artist-name" class="text-zinc-500 text-sm">Initialize Auth to Begin</p>
        </div>

        <button onclick="login()" id="action-btn" class="w-full py-4 bg-white text-black font-black rounded-2xl hover:bg-green-500 hover:text-white transition-all transform hover:-translate-y-1 active:scale-95">
            INITIALIZE AUTH
        </button>
    </div>

    <script>
        // CONFIG: Replace with your actual Live Backend URL
        const BACKEND = "https://lyrax-backend.onrender.com"; 

        window.onload = () => {
            document.getElementById('player-card').classList.remove('opacity-0', 'translate-y-10');
            const params = new URLSearchParams(window.location.search);
            if(params.get('token')) initPlayer(params.get('token'));
        };

        function login() { window.location.href = `${BACKEND}/login`; }

        function initPlayer(token) {
            document.getElementById('action-btn').innerText = "CONNECTING...";
            const player = new Spotify.Player({
                name: 'LyraX Web Player',
                getOAuthToken: cb => { cb(token); },
                volume: 0.5
            });

            player.addListener('ready', ({ device_id }) => {
                document.getElementById('track-name').innerText = "System Online";
                document.getElementById('artist-name').innerText = "Ready to receive stream";
                document.getElementById('action-btn').style.display = 'none';
                document.getElementById('pnr-tag').innerText = "SYNCED";
            });

            player.connect();
        }
    </script>
</body>
</html>
